#include <iostream>
using namespace std;
struct Node
{
    int data;
    Node *next;
};

void insert(Node *&head, int val)
{
    Node *n = new Node{val, nullptr};
    if (!head)
        head = n;
    else
    {
        Node *t = head;
        while (t->next)
            t = t->next;
        t->next = n;
    }
}

void display(Node *head)
{
    for (Node *t = head; t; t = t->next)
        cout << t->data << " -> ";
    cout << "NULL\n";
}

int countAndDelete(Node *&head, int key)
{
    int cnt = 0;

    while (head && head->data == key)
    {
        Node *tmp = head;
        head = head->next;
        delete tmp;
        cnt++;
    }

    Node *cur = head;
    while (cur && cur->next)
    {
        if (cur->next->data == key)
        {
            Node *tmp = cur->next;
            cur->next = tmp->next;
            delete tmp;
            cnt++;
        }
        else
            cur = cur->next;
    }
    return cnt;
}

int main()
{
    Node *head = nullptr;
    int arr[] = {1, 2, 1, 2, 1, 3, 1};
    for (int x : arr)
        insert(head, x);

    cout << "Original: ";
    display(head);

    int key = 1;
    int c = countAndDelete(head, key);
    cout << "Occurrences of " << key << " = " << c << endl;

    cout << "After deletion: ";
    display(head);
}
